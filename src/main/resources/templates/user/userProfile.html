<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <!-- Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User || Profile</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <!-- External CSS -->
    <link rel="stylesheet" th:href="@{/css/user/userProfile.css}">
</head>

<body>
    <div class="d-flex flex-column flex-lg-row min-vh-100">
        <!-- Sidebar -->
        <div class="sidebar text-white p-3 flex-shrink-0" id="sidebar" style="min-width: 230px;">
            <!-- Close Button for Medium devices -->
            <button class="btn btn-outline-light d-md-block d-lg-none mb-3" id="closeSidebar">
                <i class="bi bi-x-lg"></i>
            </button>

            <h4>EMS</h4>
            <nav class="nav flex-column mt-3">
                <a th:href="@{/user/userDashboard/{id}(id=${employee.id})}" class="nav-link text-white"><i
                        class="bi bi-house me-2"></i>Overview</a>
                <a th:href="@{/user/userProfile/{id}(id=${employee.id})}"
                    class="nav-link active bg-secondary rounded"><i class="bi bi-person me-2"></i>Profile</a>
                <a th:href="@{/user/userAttendance/{id}(id=${employee.id})}" class="nav-link text-white"><i
                        class="bi bi-clock me-2"></i>Attendance</a>
                <a th:href="@{/leave/userLeave/{id}(id=${employee.id})}" class="nav-link text-white"><i
                        class="bi bi-calendar me-2"></i>Leave</a>
                <a th:href="@{/user/hourlyReport/{id}(id=${employee.id})}" class="nav-link text-white"><i
                        class="bi bi-clock-history me-2"></i>Hourly Report</a>
                <a href="#" class="nav-link text-white"><i class="bi bi-bell me-2"></i>Notification</a>
                <a th:href="@{/logout}" class="nav-link text-white"><i class="bi bi-box-arrow-right me-2"></i>Logout</a>
            </nav>
        </div>

        <!-- Main Content -->
        <div id="content" class="flex-grow-1 main-content">
            <!-- Toggle Button -->
            <button class="btn btn-outline-secondary d-lg-none" id="sidebarToggle">
                <i class="bi bi-list"></i>
            </button>

            <!-- Content Area -->
            <div class="container py-4">
                <div class="row align-items-center mb-4">
                    <div class="col-md-6">
                        <h3 class="fw-bold">Profile</h3>
                    </div>
                </div>
                <div class="row">
                    <!-- Employee Form -->
                    <div class="col col-lg-8 card shadow-sm border-0">
                        <div class="card-body">
                            <form th:object="${employee}" class="row g-3" enctype="multipart/form-data">

                                <!-- Basic Details -->
                                <h5 class="mt-3">Basic Details</h5>
                                <div class="col-md-4">
                                    <label class="form-label">First Name</label>
                                    <input type="text" th:field="*{firstname}" class="form-control" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Last Name</label>
                                    <input type="text" th:field="*{lastname}" class="form-control" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Gender</label>
                                    <input type="text" class="form-control" th:field="*{gender}" readonly>
                                </div>

                                <div class="col-md-4">
                                    <label class="form-label">Date of Birth</label>
                                    <input type="text" th:field="*{dateOfBirth}" class="form-control" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Email</label>
                                    <input type="email" th:field="*{email}" class="form-control" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Phone</label>
                                    <input type="tel" th:field="*{phone}" class="form-control" readonly>
                                </div>

                                <div class="col-md-4">
                                    <label class="form-label">Address</label>
                                    <input type="text" th:field="*{address}" class="form-control" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">City</label>
                                    <input type="text" th:field="*{city}" class="form-control" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Blood Group</label>
                                    <input type="text" th:field="*{blood}" class="form-control" readonly>
                                </div>

                                <div class="col-md-4">
                                    <label class="form-label">Emergency Number</label>
                                    <input type="tel" th:field="*{emergencyNumber}" class="form-control" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Languages Known</label>
                                    <input type="text" th:field="*{language}" class="form-control" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Marital Status</label>
                                    <input type="text" class="form-control" th:field="*{maritalStatus}" readonly>
                                </div>

                                <!-- Company Details (Read-Only) -->
                                <h5 class="mt-4">Company Details</h5>
                                <div class="col-md-4">
                                    <label class="form-label">Employee Email</label>
                                    <input type="email" th:field="*{companyDetails.employeeEmail}"
                                        class="form-control bg-light" readonly>
                                </div>

                                <div class="col-md-4">
                                    <label class="form-label">Designation</label>
                                    <input type="text" th:field="*{companyDetails.designation}"
                                        class="form-control bg-light" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Shift Timing</label>
                                    <input th:field="*{companyDetails.shiftTiming}" class="form-control bg-light"
                                        readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Joining Date</label>
                                    <input type="text" th:field="*{companyDetails.joiningDate}"
                                        class="form-control bg-light" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Leaving Date</label>
                                    <input type="text" th:field="*{companyDetails.leavingDate}"
                                        class="form-control bg-light" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Status</label>
                                    <input type="text" class="form-control bg-light" th:field="*{companyDetails.status}"
                                        readonly>
                                </div>

                                <!-- Bank Details (Read-Only) -->
                                <h5 class="mt-4">Bank Details</h5>
                                <div class="col-md-4">
                                    <label class="form-label">Account Holder Name</label>
                                    <input type="text" th:field="*{bankDetails.accHolderName}"
                                        class="form-control bg-light" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Branch Name</label>
                                    <input type="text" th:field="*{bankDetails.branchName}"
                                        class="form-control bg-light" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Bank Name</label>
                                    <input type="text" th:field="*{bankDetails.bankName}" class="form-control bg-light"
                                        readonly>
                                </div>

                                <div class="col-md-4">
                                    <label class="form-label">Account Number</label>
                                    <input type="text" th:field="*{bankDetails.accNumber}" class="form-control bg-light"
                                        readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">IFSC Code</label>
                                    <input type="text" th:field="*{bankDetails.ifscCode}" class="form-control bg-light"
                                        readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">PAN Card Number</label>
                                    <input type="text" th:field="*{bankDetails.panCard}" class="form-control bg-light"
                                        readonly>
                                </div>

                                <!-- User Details (Read-Only) -->
                                <h5 class="mt-4">User Details</h5>
                                <div class="col-md-4">
                                    <label class="form-label">User Role</label>
                                    <input type="text" class="form-control bg-light" th:field="*{userType}" readonly>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Username</label>
                                    <input type="text" th:field="*{username}" class="form-control bg-light" readonly>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="col col-lg-4">
                        <div class="profile-card" th:object="${employee}">
                            <div class="profile-header"></div>
                            <img th:if="${employee.base64Image != null}"
                                th:src="'data:image/jpeg;base64,' + ${employee.base64Image}" class="profile-img"
                                alt="profilePic">
                            <div class="profile-body">
                                <h5 th:text="*{firstname + ' ' + lastname}"></h5>
                                <p th:text="*{companyDetails.designation}"></p>

                                <div class="section-title">Personal Information</div>
                                <div class="info-box">
                                    <i class="bi bi-pencil-square"></i>
                                    <div class="info-item"><i class="bi bi-envelope"></i> <span th:text="*{email}">
                                        </span></div>
                                    <div class="info-item"><i class="bi bi-telephone"></i> <span th:text="*{phone}">
                                        </span></div>
                                    <div class="info-item"><i class="bi bi-geo-alt"></i> <span th:text="*{city}">
                                        </span></div>
                                    <div class="info-item"><i class="bi bi-calendar"></i> <span
                                            th:text="*{dateOfBirth}"> </span></div>
                                </div>

                                <div class="bank-title">Bank Information</div>
                                <div class="bank-info">
                                    <i class="bi bi-pencil-square"></i>
                                    <p><strong>Bank Name:</strong> <span th:text="*{bankDetails.bankName}"></span></p>
                                    <p><strong>Account Number:</strong> <span th:text="*{bankDetails.accNumber}"></span>
                                    </p>
                                    <p><strong>IFSC Code:</strong> <span th:text="*{bankDetails.ifscCode}"></span></p>
                                    <p><strong>Pan Card Number:</strong> <span th:text="*{bankDetails.panCard}"></span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Sidebar Toggle Script -->
    <script>
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');
        const closeSidebar = document.getElementById('closeSidebar');

        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.add('active-sidebar');
        });

        closeSidebar.addEventListener('click', () => {
            sidebar.classList.remove('active-sidebar');
        });
    </script>
</body>

</html>