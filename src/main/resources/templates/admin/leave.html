<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin || Leave</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- External CSS -->
    <link rel="stylesheet" th:href="@{/css/admin/leave.css}">
</head>

<body>
    <div class="d-flex flex-column flex-lg-row min-vh-100">
        <!-- Sidebar -->
        <div class="sidebar text-white p-3 flex-shrink-0" id="sidebar" style="min-width: 230px;">
            <!-- Close Button for Medium devices -->
            <button class="btn btn-outline-light d-md-block d-lg-none mb-3" id="closeSidebar">
                <i class="bi bi-x-lg"></i>
            </button>

            <h4>EMS</h4>
            <nav class="nav flex-column mt-3">
                <a th:href="@{/admin/dashboard}" class="nav-link text-white"><i class="bi bi-house me-2"></i>Overview</a>
                <a th:href="@{/admin/profile}" class="nav-link text-white"><i class="bi bi-person me-2"></i>Profile</a>
                <a th:href="@{/admin/attendance}" class="nav-link text-white"><i class="bi bi-clock me-2"></i>Attendance</a>
                <a th:href="@{/admin/leave}" class="nav-link active bg-secondary rounded"><i class="bi bi-calendar me-2"></i>Leave</a>
                <a th:href="@{/admin/hourlyReports}" class="nav-link text-white"><i class="bi bi-list-check me-2"></i>Hourly Reports</a>
                <a th:href="@{/admin/adminNotifications}" class="nav-link text-white"><i class="bi bi-bell me-2"></i>Notification</a>
                <a th:href="@{/logout}" class="nav-link text-white"><i class="bi bi-box-arrow-right me-2"></i>Logout</a>
            </nav>
        </div>

        <!-- Main Content -->
        <div id="content" class="flex-grow-1 main-content">
            <!-- Toggle Button -->
            <button class="btn btn-outline-secondary d-lg-none" id="sidebarToggle">
                <i class="bi bi-list"></i>
            </button>
            <!-- Header -->
            <div class="navbar-custom fade-in">
                <div class="navbar-left">
                </div>
        
                <div class="navbar-right">
                    <form class="d-flex search-box" role="search">
                        <input id="name" class="form-control me-2" type="search" placeholder="Search">
                        <button id="filterBtn" class="btn searchBar" type="submit"><i class="bi bi-search"></i></button>
                    </form>
        
                    <!-- ðŸ“… Date Range Filter -->
                    <div class="d-sm-flex align-items-center mx-3 my-2 my-sm-0">
                        <label class="me-2 fw-semibold">From:</label>
                        <input type="date" id="fromDate" class="form-control form-control-sm me-3">
                        <label class="me-2 fw-semibold">To:</label>
                        <input type="date" id="toDate" class="form-control form-control-sm me-3">
                    </div>
        
                    <!-- Calendar & Download Buttons -->
                    <button id="downloadPdfBtn" title="Download PDF Report" class="btn-download">Download</button>
                </div>
            </div>
            <!-- Summary Cards -->
            <div id="summaryCards" class="row g-3 fade-in">
                <div class="col-lg-3 col-md-6 col-sm-6 col-6">
                    <div class="summary-card bg-green shadow-sm rounded-3 text-center p-3">
                        <h2 id="totalLeaves">--</h2>
                        <p>Total Leaves</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6 col-6">
                    <div class="summary-card bg-blue shadow-sm rounded-3 text-center p-3">
                        <h2 id="paidLeaves">--</h2>
                        <p>Approved Leave</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6 col-6">
                    <div class="summary-card bg-yellow shadow-sm rounded-3 text-center p-3">
                        <h2 id="sickLeaves">--</h2>
                        <p>Pending Leave</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6 col-6">
                    <div class="summary-card bg-purple shadow-sm rounded-3 text-center p-3">
                        <h2 id="casualLeaves">--</h2>
                        <p>Rejected Leave</p>
                    </div>
                </div>
            </div>
            
            <!-- Leave Table -->
            <div class="mt-4 fade-in">
                <div class="d-sm-flex justify-content-between align-items-center mb-2">
                    <h5 class="fw-bold  my-3 my-sm-0">Employee Leave Requests</h5>
                    <div class="d-flex align-items-center gap-2">
                        <label class="form-label mb-0 me-1 fw-semibold">Filter:</label>
                        <select id="statusFilter" class="form-select form-select-sm" style="width:150px;">
                            <option value="">All</option>
                            <option value="Pending">Pending</option>
                            <option value="Approved">Approved</option>
                            <option value="Rejected">Rejected</option>
                        </select>
                    </div>
                </div>
            
                <div class="table-container border rounded shadow-sm bg-white p-2">
                    <table class="table table-borderless align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>Name</th>
                                <th>Leave Type</th>
                                <th>From</th>
                                <th>To</th>
                                <th>Days</th>
                                <th>Approved By</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="leaveTableBody">
                            <!-- Dynamic data will load here -->
                            <tr>
                                <td colspan="8" class="text-center text-muted py-3">
                                    Loading leave data...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            </div>
            </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
  <!-- Sidebar Toggle Script -->
    <script>
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');
        const closeSidebar = document.getElementById('closeSidebar');

        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.add('active-sidebar');
        });

        closeSidebar.addEventListener('click', () => {
            sidebar.classList.remove('active-sidebar');
        });
    </script>

    <!-- Leave Management JS -->
    <script th:src="@{/js/leave.js}"></script>
</body>
</html>