<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin || Hourly Reports</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <!-- External CSS -->
  <link rel="stylesheet" th:href="@{/css/admin/hourlyreport.css}">
</head>

<body>
  <div class="d-flex flex-column flex-lg-row min-vh-100">
    <!-- Sidebar -->
    <div class="sidebar text-white p-3 flex-shrink-0" id="sidebar" style="min-width: 230px;">
      <!-- Close Button for Medium devices -->
      <button class="btn btn-outline-light d-md-block d-lg-none mb-3" id="closeSidebar">
        <i class="bi bi-x-lg"></i>
      </button>

      <h4>EMS</h4>
      <nav class="nav flex-column mt-3">
        <a th:href="@{/admin/dashboard}" class="nav-link text-white"><i class="bi bi-house me-2"></i>Overview</a>
        <a th:href="@{/admin/profile}" class="nav-link text-white"><i class="bi bi-person me-2"></i>Profile</a>
        <a th:href="@{/admin/attendance}" class="nav-link text-white"><i class="bi bi-clock me-2"></i>Attendance</a>
        <a th:href="@{/admin/leave}" class="nav-link text-white"><i class="bi bi-calendar me-2"></i>Leave</a>
        <a th:href="@{/admin/hourlyReports}" class="nav-link active bg-secondary rounded"><i
            class="bi bi-list-check me-2"></i>Hourly Reports</a>
        <a th:href="@{/admin/adminNotifications}" class="nav-link text-white"><i
            class="bi bi-bell me-2"></i>Notification</a>
        <a th:href="@{/logout}" class="nav-link text-white"><i class="bi bi-box-arrow-right me-2"></i>Logout</a>
      </nav>
    </div>

    <!-- Main Content -->
    <div id="content" class="flex-grow-1 main-content">
      <!-- Toggle Button -->
      <button class="btn btn-outline-secondary d-lg-none" id="sidebarToggle">
        <i class="bi bi-list"></i>
      </button>
      <!-- Header -->
      <div class="navbar-custom fade-in">
        <div class="navbar-left">
          <!-- âœ… Add data attributes for JS -->
          <h4 id="employeeInfo" th:data-name="${employee.firstname + ' ' + employee.lastname}"
            th:data-id="${employee.id}">
            Hourly Reports - <span th:text="${employee.firstname + ' ' + employee.lastname}">John Doe</span>
            <small class="text-muted ms-2">(ID: <span th:text="${employee.id}">101</span>)</small>
          </h4>
        </div>

        <div class="navbar-right">
          <!-- ðŸ“… Date Range Filter -->
          <div class="d-sm-flex align-items-center mx-3 my-2 my-sm-0">
            <label class="me-2 fw-semibold">From:</label>
            <input type="date" id="fromDate" class="form-control form-control-sm me-3">
            <label class="me-2 fw-semibold">To:</label>
            <input type="date" id="toDate" class="form-control form-control-sm me-3">
          </div>

          <!-- Calendar & Download Buttons -->
          <button id="filterBtn" title="Filter" class="btn-calendar me-2"><i class="bi bi-funnel"></i> Filter</button>
          <button id="downloadPdfBtn" title="Download PDF Report" class="btn-download"
            th:disabled="${#lists.isEmpty(reports)}">Download</button>
        </div>
      </div>

      <!-- âœ… Table -->
      <div class="table-container border rounded shadow-sm bg-white p-2">
        <table class="table table-borderless align-middle mb-0" id="reportTable">
          <thead class="table-light">
            <tr>
              <th>Time Slot</th>
              <th>Task Description</th>
              <th>Status</th>
              <th>Submitted At</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="report : ${reports}">
              <td th:text="${report.timeSlot}">10:00 - 11:00</td>
              <td th:text="${report.taskDescription}">Developed Employee Module</td>
              <td th:text="${report.status}">In Progress</td>
              <td th:text="${#temporals.format(report.createdAt, 'yyyy-MM-dd HH:mm')}">2025-11-03 14:00</td>
            </tr>
            <tr th:if="${#lists.isEmpty(reports)}">
              <td colspan="4" class="text-center text-muted">No reports found</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- âœ… Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- âœ… Make sure these load AFTER bootstrap -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Sidebar logic
      const sidebarToggle = document.getElementById('sidebarToggle');
      const sidebar = document.getElementById('sidebar');
      const closeSidebar = document.getElementById('closeSidebar');

      if (sidebarToggle) {
        sidebarToggle.addEventListener('click', () => {
          sidebar.classList.add('active-sidebar');
        });
      }
      if (closeSidebar) {
        closeSidebar.addEventListener('click', () => {
          sidebar.classList.remove('active-sidebar');
        });
      }
    });
  </script>

  <!-- âœ… Custom JS for Filtering -->
  <script th:src="@{/js/adminHourlyReports.js}"></script>

</body>

</html>