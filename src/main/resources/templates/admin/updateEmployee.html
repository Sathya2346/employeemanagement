<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <!-- Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin || UpdateEmployee</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <!-- External CSS -->
    <link rel="stylesheet" th:href="@{/css/admin/employeeDetails.css}">
</head>

<body>
    <div class="d-flex flex-column flex-lg-row min-vh-100">
        <!-- Sidebar -->
        <div class="sidebar text-white p-3 flex-shrink-0" id="sidebar" style="min-width: 230px;">
            <!-- Close Button for Medium devices -->
            <button class="btn btn-outline-light d-md-block d-lg-none mb-3" id="closeSidebar">
                <i class="bi bi-x-lg"></i>
            </button>

            <h4>EMS</h4>
            <nav class="nav flex-column mt-3">
                <a th:href="@{/admin/dashboard}" class="nav-link text-white"><i
                        class="bi bi-house me-2"></i>Overview</a>
                <a th:href="@{/admin/profile}" class="nav-link text-white"><i class="bi bi-person me-2"></i>Profile</a>
                <a th:href="@{/admin/viewEmployeeDetails}" class="nav-link active bg-secondary rounded"><i
                        class="bi bi-people me-2"></i>Employee Details</a>
                <a th:href="@{/admin/attendance}" class="nav-link text-white"><i
                        class="bi bi-clock me-2"></i>Attendance</a>
                <a th:href="@{/admin/leave}" class="nav-link text-white"><i class="bi bi-calendar me-2"></i>Leave</a>
                <a th:href="@{/admin/hourlyReports}" class="nav-link text-white"><i
                        class="bi bi-list-check me-2"></i>Hourly Reports</a>
                <a th:href="@{/admin/adminNotifications}" class="nav-link text-white"><i
                        class="bi bi-bell me-2"></i>Notification</a>
                <a th:href="@{/logout}" class="nav-link text-white"><i class="bi bi-box-arrow-right me-2"></i>Logout</a>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content flex-grow-1 bg-light">
            <!-- Toggle Button -->
            <button class="btn btn-outline-secondary d-lg-none" id="sidebarToggle">
                <i class="bi bi-list"></i>
            </button>
            <!-- Top Navbar -->
            <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm px-3">
                <div class="container-fluid d-flex justify-content-end align-items-center">
                    <div class="d-lg-flex align-items-center">
                        <img th:if="${employee.base64Image != null}"
                            th:src="'data:image/jpeg;base64,' + ${employee.base64Image}" class="avatarLogo"
                            alt="profilePic">
                    </div>
                </div>
            </nav>

            <!-- Content Area -->
            <div class="container py-4">
                <div class="row align-items-center mb-4">
                    <div class="col-md-6">
                        <h3 class="fw-bold">Employee Details</h3>
                    </div>
                </div>
                <div class="row">
                    <!-- Employee Form -->
                    <div class="col col-lg-8 card shadow-sm border-0">
                        <div class="card-body">
                            <!-- Error Alert -->
                            <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show"
                                role="alert">
                                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                                <span th:text="${errorMessage}"></span>
                                <button type="button" class="btn-close" data-bs-dismiss="alert"
                                    aria-label="Close"></button>
                            </div>

                            <form th:action="@{/admin/updateEmployee/{id}(id=${employee.id})}" method="post"
                                th:object="${employee}" class="row g-3" enctype="multipart/form-data">

                                <!-- Basic Details -->
                                <h5 class="mt-3">Basic Details</h5>
                                <div class="col-md-4">
                                    <label class="form-label">First Name*</label>
                                    <input type="text" th:field="*{firstname}" class="form-control" required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Last Name*</label>
                                    <input type="text" th:field="*{lastname}" class="form-control" required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Gender*</label>
                                    <select class="form-select" th:field="*{gender}" required>
                                        <option value="" disabled selected>Select</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>

                                <div class="col-md-4">
                                    <label class="form-label">Date of Birth*</label>
                                    <input type="date" th:field="*{dateOfBirth}" class="form-control" required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Email*</label>
                                    <input type="email" th:field="*{email}" class="form-control" required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Phone*</label>
                                    <input type="tel" th:field="*{phone}" class="form-control" required>
                                </div>

                                <div class="col-md-4">
                                    <label class="form-label">Address*</label>
                                    <input type="text" th:field="*{address}" class="form-control" required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">City*</label>
                                    <input type="text" th:field="*{city}" class="form-control" required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Blood Group*</label>
                                    <input type="text" th:field="*{blood}" class="form-control" required>
                                </div>

                                <div class="col-md-4">
                                    <label class="form-label">Emergency Number*</label>
                                    <input type="tel" th:field="*{emergencyNumber}" class="form-control" required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Languages Known*</label>
                                    <input type="text" th:field="*{language}" class="form-control" required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Marital Status*</label>
                                    <select class="form-select" th:field="*{maritalStatus}" required>
                                        <option value="married">Married</option>
                                        <option value="unmarried">Unmarried</option>
                                    </select>
                                </div>

                                <!-- Company Details -->
                                <h5 class="mt-4">Company Details</h5>
                                <div class="col-md-4">
                                    <label class="form-label">Employee Email*</label>
                                    <input type="email" th:field="*{companyDetails.employeeEmail}" class="form-control"
                                        required>
                                </div>

                                <div class="col-md-4">
                                    <label class="form-label">Designation*</label>
                                    <input type="text" th:field="*{companyDetails.designation}" class="form-control"
                                        required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Shift Timing*</label>
                                    <select class="form-select" th:field="*{companyDetails.shiftTiming}" required>
                                        <option value="" disabled selected>Select Shift</option>
                                        <option value="Morning (9:00 AM - 6:00 PM)">Morning (9:00 AM - 6:00 PM)</option>
                                        <option value="General (10:00 AM - 7:00 PM)">General (10:00 AM - 7:00 PM)
                                        </option>
                                        <option value="Evening (2:00 PM - 11:00 PM)">Evening (2:00 PM - 11:00 PM)
                                        </option>
                                        <option value="Night (10:00 PM - 6:00 AM)">Night (10:00 PM - 6:00 AM)</option>
                                        <option value="Rotational">Rotational</option>
                                    </select>
                                </div>

                                <div class="col-md-4">
                                    <label class="form-label">Joining Date*</label>
                                    <input type="date" th:field="*{companyDetails.joiningDate}" class="form-control"
                                        required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Leaving Date</label>
                                    <input type="date" th:field="*{companyDetails.leavingDate}" class="form-control">
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Status*</label>
                                    <select class="form-select" th:field="*{companyDetails.status}" required>
                                        <option value="" disabled>Select</option>
                                        <option value="Active">Active</option>
                                        <option value="Inactive">Inactive</option>
                                    </select>
                                </div>

                                <!-- Bank Details -->
                                <h5 class="mt-4">Bank Details</h5>
                                <div class="col-md-4">
                                    <label class="form-label">Account Holder Name*</label>
                                    <input type="text" th:field="*{bankDetails.accHolderName}" class="form-control"
                                        required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Branch Name*</label>
                                    <input type="text" th:field="*{bankDetails.branchName}" class="form-control"
                                        required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Bank Name*</label>
                                    <input type="text" th:field="*{bankDetails.bankName}" class="form-control" required>
                                </div>

                                <div class="col-md-4">
                                    <label class="form-label">Account Number*</label>
                                    <input type="text" th:field="*{bankDetails.accNumber}" class="form-control"
                                        required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">IFSC Code*</label>
                                    <input type="text" th:field="*{bankDetails.ifscCode}" class="form-control" required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">PAN Card Number*</label>
                                    <input type="text" th:field="*{bankDetails.panCard}" class="form-control" required>
                                </div>

                                <!-- User Details -->
                                <h5 class="mt-4">User Details</h5>
                                <div class="col-md-4">
                                    <label class="form-label">User*</label>
                                    <select class="form-select" th:field="*{userType}" required>
                                        <option value="User">User</option>
                                        <option value="Admin">Admin</option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Username*</label>
                                    <input type="text" th:field="*{username}" class="form-control" required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Password*</label>
                                    <input type="password" th:field="*{password}" class="form-control" required>
                                </div>

                                <!-- Upload Image -->
                                <h5 class="mt-3">Document Details</h5>
                                <div class="col-md-4">
                                    <label class="form-label">Profile Picture*</label>
                                    <input type="file" accept="image/*" name="profileFile" class="form-control"
                                        required>
                                </div>
                                <!-- Submit Buttons -->

                                <div class="col-12 text-center mt-4">
                                    <button type="submit" class="btn btn-success px-4">Update</button>
                                    <a th:href="@{/admin/profile}" class="btn btn-secondary px-4 ms-2">Cancel</a>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="col col-lg-4">
                        <div class="profile-card" th:object="${employee}">
                            <div class="profile-header"></div>
                            <img th:if="${employee.base64Image != null}"
                                th:src="'data:image/jpeg;base64,' + ${employee.base64Image}" class="profile-img"
                                alt="profilePic">
                            <div class="profile-body">
                                <h5 th:text="*{firstname + ' ' + lastname}"></h5>
                                <p th:text="*{companyDetails.designation}"></p>

                                <div class="section-title">Personal Information</div>
                                <div class="info-box">
                                    <i class="bi bi-pencil-square"></i>
                                    <div class="info-item"><i class="bi bi-envelope"></i> <span th:text="*{email}">
                                        </span></div>
                                    <div class="info-item"><i class="bi bi-telephone"></i> <span th:text="*{phone}">
                                        </span></div>
                                    <div class="info-item"><i class="bi bi-geo-alt"></i> <span th:text="*{city}">
                                        </span></div>
                                    <div class="info-item"><i class="bi bi-calendar"></i> <span
                                            th:text="*{dateOfBirth}"> </span></div>
                                </div>

                                <div class="bank-title">Bank Information</div>
                                <div class="bank-info">
                                    <i class="bi bi-pencil-square"></i>
                                    <p><strong>Bank Name:</strong> <span th:text="*{bankDetails.bankName}"></span></p>
                                    <p><strong>Account Number:</strong> <span th:text="*{bankDetails.accNumber}"></span>
                                    </p>
                                    <p><strong>IFSC Code:</strong> <span th:text="*{bankDetails.ifscCode}"></span></p>
                                    <p><strong>Pan Card Number:</strong> <span th:text="*{bankDetails.panCard}"></span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Sidebar Toggle Script -->
    <script>
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');
        const closeSidebar = document.getElementById('closeSidebar');

        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.add('active-sidebar');
        });

        closeSidebar.addEventListener('click', () => {
            sidebar.classList.remove('active-sidebar');
        });
    </script>
</body>

</html>